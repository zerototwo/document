---
description: >-
  Java 10 æ˜¯ Java 9 ä¹‹åçš„ çŸ­æœŸç‰ˆæœ¬ï¼Œè™½ç„¶æ²¡æœ‰åƒ Java 9
  é‚£æ ·çš„æ¨¡å—åŒ–å˜é©ï¼Œä½†å®ƒä»ç„¶å¸¦æ¥äº†ä¸€äº›é‡è¦çš„è¯­è¨€å¢å¼ºã€GCä¼˜åŒ–ã€JVMæ€§èƒ½æå‡ç­‰æ–°ç‰¹æ€§
---

# Java10

## ğŸ“Œ Java 10 æ–°ç‰¹æ€§æ€»ç»“è¡¨æ ¼

| **ç±»åˆ«**        | **æ–°ç‰¹æ€§**                                   | **ä½œç”¨**                |
| ------------- | ----------------------------------------- | --------------------- |
| **è¯­æ³•å¢å¼º**      | `var` å…³é”®å­—                                 | å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ï¼Œå‡å°‘å†—ä½™ç±»å‹å£°æ˜     |
| **GC æ”¹è¿›**     | G1 GC æ€§èƒ½ä¼˜åŒ–                                | é™ä½ Full GC è§¦å‘é¢‘ç‡ï¼Œæé«˜ååé‡ |
| **JVM æ”¹è¿›**    | `Application Class-Data Sharing (AppCDS)` | ç¼©çŸ­ JVM å¯åŠ¨æ—¶é—´ï¼Œæé«˜æ€§èƒ½      |
| **å†…å­˜ç®¡ç†**      | å †å†…å­˜åˆ†é…æ”¹è¿›ï¼ˆThread-Local Handshakesï¼‰          | åŠ¨æ€è°ƒæ•´å †å¤§å°ï¼Œæå‡å¹¶å‘æ•ˆç‡        |
| **å®‰å…¨æ€§**       | `Root Certificates`ï¼ˆé»˜è®¤å¯ä¿¡ CA è¯ä¹¦ï¼‰           | Java é»˜è®¤åŒ…å« CA è¯ä¹¦ï¼Œæé«˜å®‰å…¨æ€§ |
| **Docker æ”¯æŒ** | `JVM Container Awareness`                 | ä½¿ JVM è¿è¡Œæ—¶æ›´å¥½åœ°é€‚é…å®¹å™¨ç¯å¢ƒ    |

## 1.var å…³é”®å­—ï¼ˆå±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ï¼‰

### ä½œç”¨

* å…è®¸åœ¨å±€éƒ¨å˜é‡å£°æ˜æ—¶ çœç•¥æ˜¾å¼ç±»å‹ï¼Œç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­ç±»å‹
* æé«˜ä»£ç å¯è¯»æ€§ï¼Œå‡å°‘å†—ä½™ä»£ç 

### ä»£ç ç¤ºä¾‹

```java
// ä¼ ç»Ÿæ–¹å¼ï¼ˆJava 9 åŠä»¥å‰ï¼‰
String message = "Hello, Java 10!";
List<String> list = new ArrayList<>();

// Java 10 ä¹‹å
var message = "Hello, Java 10!";
var list = new ArrayList<String>();

System.out.println(message);
```

{% hint style="danger" %}
â€¢ var åªèƒ½ç”¨äºå±€éƒ¨å˜é‡ï¼Œä¸èƒ½ç”¨äºç±»å­—æ®µã€æ–¹æ³•å‚æ•°ã€æ–¹æ³•è¿”å›ç±»å‹

â€¢ var å¿…é¡»åœ¨å£°æ˜æ—¶åˆå§‹åŒ–ï¼Œä¸èƒ½èµ‹å€¼ null
{% endhint %}

## 2.G1 GC æ€§èƒ½ä¼˜åŒ–

### ä½œç”¨

* å‡å°‘ Full GC è§¦å‘çš„é¢‘ç‡ï¼Œæé«˜ååé‡
* è‡ªåŠ¨è°ƒæ•´å †çš„å›æ”¶ç­–ç•¥ï¼Œæå‡å¤§å¯¹è±¡çš„å›æ”¶èƒ½åŠ›

```sh
java -XX:+UseG1GC MyApplication
```

### å˜åŒ–ç‚¹ï¼š

* åœ¨ Java 9 ä¸­ï¼ŒG1 GC å¯èƒ½è§¦å‘ Full GC
* Java 10 ä¼˜åŒ–äº† G1 GCï¼Œä½¿å…¶æ›´éš¾è§¦å‘ Full GC

## 3.Application Class-Data Sharing (AppCDS)

### ä½œç”¨

* ç¼©çŸ­ JVM å¯åŠ¨æ—¶é—´
* å¤šä¸ª JVM è¿›ç¨‹å…±äº« Class Metadata
* æé«˜å®¹å™¨åŒ–åº”ç”¨çš„å¯åŠ¨é€Ÿåº¦

### ä»£ç ç¤ºä¾‹

```sh
java -Xshare:dump
```

è¿è¡Œåº”ç”¨æ—¶å¯ç”¨ AppCDSï¼š

```sh
java -Xshare:on -cp MyApplication.jar MyMainClass
```

{% hint style="warning" %}
é€‚ç”¨äº Microservicesã€äº‘åŸç”Ÿåº”ç”¨ï¼Œå¦‚ Spring Bootã€‚
{% endhint %}

## 4.å †å†…å­˜åˆ†é…æ”¹è¿›ï¼ˆThread-Local Handshakesï¼‰

### ä½œç”¨

* å…è®¸åœ¨ä¸å†»ç»“æ‰€æœ‰çº¿ç¨‹çš„æƒ…å†µä¸‹æ‰§è¡Œå†…å­˜å›æ”¶
* æé«˜ é«˜å¹¶å‘ç¯å¢ƒä¸‹çš„ GC æ•ˆç‡

### å¯ç”¨æ–¹å¼

æ— éœ€é¢å¤–é…ç½®ï¼ŒJava 10 é»˜è®¤å¯ç”¨ Thread-Local Handshakesã€‚

{% hint style="info" %}
é€‚ç”¨äºå¤šçº¿ç¨‹åº”ç”¨ï¼Œå¦‚ é«˜å¹¶å‘ Web æœåŠ¡å™¨ã€åˆ†å¸ƒå¼ç³»ç»Ÿã€‚
{% endhint %}

## 5.Root Certificatesï¼ˆé»˜è®¤ CA è¯ä¹¦ï¼‰

### ä½œç”¨

* Java 10 å†…ç½®å¯ä¿¡ CA è¯ä¹¦ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®
* æé«˜ Java HTTPS è¿æ¥çš„å®‰å…¨æ€§

### ä»£ç ç¤ºä¾‹

æ— éœ€é¢å¤–ä»£ç ï¼ŒJava 10 é»˜è®¤åŒ…å«å¯ä¿¡ CA è¯ä¹¦ã€‚

{% hint style="info" %}
é€‚ç”¨åœºæ™¯:

â€¢ HTTPS è¿æ¥

â€¢ OAuth è®¤è¯

â€¢ SSL/TLS è¯ä¹¦æ ¡éªŒ
{% endhint %}

## 6.Docker é€‚é…å¢å¼º

### ä½œç”¨

* ä½¿ JVM è¿è¡Œæ—¶æ›´å¥½åœ°é€‚é…å®¹å™¨ï¼ˆDockerï¼‰ç¯å¢ƒ
* åŠ¨æ€è°ƒæ•´ JVM èµ„æºåˆ†é…ï¼ˆCPU & å†…å­˜ï¼‰

### å¯ç”¨æ–¹å¼

ï¼ˆ1ï¼‰åœ¨ Docker å®¹å™¨ä¸­è¿è¡Œ Java 10 åº”ç”¨

```sh
docker run --memory=512m --cpus=1 openjdk:10 java -XshowSettings:system -version
```

ï¼ˆ2ï¼‰JVM è¯†åˆ« Docker èµ„æºåˆ†é…

```sh
java -XX:+PrintFlagsFinal | grep -i heap
```

{% hint style="info" %}
äº‘è®¡ç®—ã€Kubernetesã€Docker Swarm è¿è¡Œ Java åº”ç”¨
{% endhint %}







